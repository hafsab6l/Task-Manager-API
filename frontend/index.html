<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pure JS Task Manager</title>
<style>
/* CSS Styles will be inserted here */
/* See next section for the <style> block content */
/* General Reset and Base Styles */
:root {
--primary-color: #4A90E2; /* Deep Blue */
--secondary-color: #50E3C2; /* Mint Green */
--background-light: #F4F7F6;
--background-dark: #FFFFFF;
--text-dark: #333333;
--text-light: #666666;
--border-color: #E0E0E0;
--shadow-light: 0 4px 6px rgba(0, 0, 0, 0.1);
--shadow-hover: 0 6px 12px rgba(0, 0, 0, 0.15);
}
* {
box-sizing: border-box;
margin: 0;
padding: 0;
}
body {
font-family: 'system-ui', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
"Helvetica Neue", Arial, "Noto Sans", sans-serif;
background-color: var(--background-light);
color: var(--text-dark);
min-height: 100vh;
display: flex;
justify-content: center;
padding: 20px;
}
/* Main Container */
.container {
width: 100%;
max-width: 800px;
margin-top: 20px;
background: var(--background-dark);
border-radius: 16px;
box-shadow: var(--shadow-light);
padding: 30px;
}
header {
text-align: center;
margin-bottom: 30px;
}
header h1 {
color: var(--primary-color);
font-size: 2.5rem;
font-weight: 700;
}
/* Task Form Styles */
#task-form {
display: flex;
gap: 10px;
margin-bottom: 30px;
}
#new-task-title, #new-task-description {
flex-grow: 1;
padding: 12px 15px;
border: 1px solid var(--border-color);
border-radius: 8px;
font-size: 1rem;
transition: border-color 0.3s;
}
#new-task-title:focus, #new-task-description:focus {
outline: none;
border-color: var(--primary-color);
box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
}
.button {
padding: 12px 20px;
border: none;
border-radius: 8px;
font-weight: 600;
cursor: pointer;
transition: background-color 0.3s, box-shadow 0.3s;
font-size: 1rem;
}
.primary-button {
background-color: var(--primary-color);
color: white;
}
.primary-button:hover {
background-color: #3A7BCF;
box-shadow: var(--shadow-hover);
}
.delete-button {
background-color: #E74C3C;
color: white;
padding: 8px 15px;
}
.delete-button:hover {
background-color: #C0392B;
}
.edit-button {
background-color: #F39C12;
color: white;
padding: 8px 15px;
margin-right: 5px;
}
.edit-button:hover {
background-color: #E67E22;
}
/* Task List Styles */
.task-list-title {
font-size: 1.5rem;
font-weight: 600;
margin-bottom: 15px;
color: var(--text-dark);
border-bottom: 2px solid var(--border-color);
padding-bottom: 10px;
}
#task-list {
list-style: none;
padding: 0;
display: flex;
flex-direction: column;
gap: 10px;
}
.task-item {
display: flex;
align-items: center;
justify-content: space-between;
background: var(--background-light);
padding: 15px;
border-radius: 8px;
border-left: 5px solid var(--primary-color);
transition: transform 0.2s, box-shadow 0.2s;
}
.task-item:hover {
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
transform: translateY(-1px);
}
.task-details {
display: flex;
align-items: center;
flex-grow: 1;
cursor: pointer;
}
.task-checkbox {
margin-right: 15px;
width: 20px;
height: 20px;
accent-color: var(--secondary-color);
cursor: pointer;
}
.task-title {
font-size: 1.1rem;
font-weight: 500;
word-break: break-word;
flex-grow: 1;
}
.task-completed .task-title {
text-decoration: line-through;
color: var(--text-light);
}
.task-completed {
border-left-color: var(--secondary-color);
background: #EBF8FF; /* Lighter background for completed tasks */
}
.task-actions {
display: flex;
align-items: center;
margin-left: 15px;
}
/* Modal for Editing/Messages */
.modal-overlay {
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.6);
display: none; /* Hidden by default */
justify-content: center;
align-items: center;
z-index: 1000;
backdrop-filter: blur(3px);
}
.modal-content {
background: var(--background-dark);
padding: 30px;
border-radius: 12px;
box-shadow: var(--shadow-hover);
width: 90%;
max-width: 400px;
transform: scale(0.9);
transition: transform 0.3s ease-out;
}
.modal-overlay.active .modal-content {
transform: scale(1);
}
.modal-overlay.active {
display: flex;
}
.modal-content h3 {
margin-bottom: 20px;
color: var(--primary-color);
}
#edit-title-input, #edit-description-input {
width: 100%;
padding: 10px;
margin-bottom: 20px;
border: 1px solid var(--border-color);
border-radius: 6px;
font-size: 1rem;
}
.modal-actions {
display: flex;
justify-content: flex-end;
gap: 10px;
}
.secondary-button {
background-color: #95A5A6;
color: white;
}
.secondary-button:hover {
background-color: #7F8C8D;
}
/* Message Box Styling */
#message-box {
position: fixed;
top: 20px;
right: 20px;
padding: 15px 25px;
background: #2ECC71; /* Green for success */
color: white;
border-radius: 8px;
box-shadow: var(--shadow-hover);
z-index: 10000;
opacity: 0;
visibility: hidden;
transition: opacity 0.5s, visibility 0.5s, transform 0.5s;
transform: translateY(-100%);
font-weight: 500;
}
#message-box.show {
opacity: 1;
visibility: visible;
transform: translateY(0);
}
#message-box.error {
background: #E74C3C; /* Red for error */
}
/* Responsive Adjustments */
@media (max-width: 600px) {
.container {
padding: 20px;
margin-top: 10px;
}
header h1 {
font-size: 2rem;
}
#task-form {
flex-direction: column;
}
.button {
width: 100%;
}
.task-item {
flex-direction: column;
align-items: flex-start;
gap: 10px;
}
.task-details {
width: 100%;
}
.task-actions {
width: 100%;
justify-content: flex-end;
}
}

</style>
</head>
<body>
<div class="container">
<header>
<h1>Task Manager</h1>
</header>
<form id="task-form">
<input type="text" id="new-task-title" placeholder="What needs to be done?" required
maxlength="255">
<input type="text" id="new-task-description" placeholder="How does it need to be done?" 
maxlength="255">
<button type="submit" class="button primary-button">Add Task</button>
</form>
<div class="task-list-title">My Tasks</div>
<ul id="task-list">
</ul>
<div id="message-box" role="alert"></div>
<div id="edit-modal-overlay" class="modal-overlay">
<div class="modal-content">
<h3>Edit Task</h3>
<input type="text" id="edit-title-input" required maxlength="255">
<input type="text" id="edit-description-input" maxlength="255">
<div class="modal-actions">
<button id="cancel-edit" class="button secondary-button">Cancel</button>
<button id="save-edit" class="button primary-button">Save Changes</button>
</div>
</div>
</div>
</div>
<script>
/* JavaScript Logic will be inserted here */
/* See the third section for the <script> block content */
// --- Configuration (Crucial Fix: Explicitly define API URL) ---
// You MUST use the full URL to avoid CORS/file:// issues.
const API_BASE_URL = 'http://127.0.0.1:5000/';
const taskListElement = document.getElementById('task-list');
const formElement = document.getElementById('task-form');
const newTaskTitleInput = document.getElementById('new-task-title');
const newTaskDescriptionInput = document.getElementById('new-task-description');
const editModalOverlay = document.getElementById('edit-modal-overlay');
const editTitleInput = document.getElementById('edit-title-input');
const editDescriptionInput = document.getElementById('edit-description-input');
const saveEditButton = document.getElementById('save-edit');
const messageBox = document.getElementById('message-box');
let currentEditingTaskId = null;
// Utility to display status messages (Success/Error)
function showMessage(message, isError = false) {
messageBox.textContent = message;
messageBox.className = 'show';
if (isError) {
messageBox.classList.add('error');
} else {
messageBox.classList.remove('error');
}
// Hide after 3 seconds
setTimeout(() => {
messageBox.className = '';
}, 3000);
}
// --- Core API Call Function (Now handles all methods) ---
async function apiCall(endpoint, method = 'GET', body = null, retries = 3) {
// endpoint should be "" for GET/POST, or "/<id>" for PUT/DELETE
const url = `${API_BASE_URL}${endpoint}`;
const options = {
method,
headers: {
'Content-Type': 'application/json',
},
};
if (body) {
options.body = JSON.stringify(body);
}
for (let i = 0; i < retries; i++) {
try {
const response = await fetch(url, options);
if (!response.ok) {
const errorData = await response.json().catch(() => ({ message: 'Server error'
}));
throw new Error(errorData.message || `HTTP error! Status:
${response.status}`);
}
if (response.status === 204) return {}; // 204 No Content for delete/update success
return await response.json();
} catch (error) {
console.error(`API Call failed (${method} ${url}), Attempt ${i + 1}:`,
error.message);
if (i === retries - 1) {
showMessage(`Error: ${error.message}. Please check API connection.`,
true);
throw error;
}
const delay = Math.pow(2, i) * 1000 + (Math.random() * 1000);
await new Promise(resolve => setTimeout(resolve, delay));
}
}
}
// --- CRUD Operations (Wired to the API) ---
async function fetchTasks() {
try {
const tasks = await apiCall('/api/tasks'); // GET /api/tasks
renderTasks(tasks);
} catch (error) {
taskListElement.innerHTML = `<li style="color: #E74C3C; list-style: none; padding:
15px;">Could not load tasks. Ensure your Flask API is running and CORS is enabled.</li>`;
}
}
async function addTask(title, description) {
try {
await apiCall('/api/tasks', 'POST', { title: title, description: description, completed: false }); // POST /api/tasks
newTaskTitleInput.value = '';
newTaskDescriptionInput.value = '';
showMessage('Task added successfully! 🎉');
await fetchTasks();
} catch (error) {
showMessage('Error adding task. Check Flask API logs.', true);
}
}
async function toggleTask(taskId, isCompleted) {
try {
await apiCall(`/api/tasks/${taskId}`, 'PUT', { completed: isCompleted }); // PUT
// /api/tasks/<id>
showMessage(isCompleted ? 'Task marked complete! ✅' : 'Task marked incomplete! ✍️');
await fetchTasks();
} catch (error) {
showMessage('Error toggling task status.', true);
}
}
async function deleteTask(taskId) {
try {
await apiCall(`/api/tasks/${taskId}`, 'DELETE'); // DELETE /api/tasks/<id>
showMessage('Task deleted! 🗑');
await fetchTasks();
} catch (error) {
showMessage('Error deleting task.', true);
}
}
async function updateTaskTitle(taskId, newTitle, newDescription) {
try {
await apiCall(`/api/tasks/${taskId}`, 'PUT', { title: newTitle, description: newDescription }); // PUT /api/tasks/<id>
closeEditModal();
showMessage('Task updated successfully! ✨');
await fetchTasks();
} catch (error) {
showMessage('Error updating task title.', true);
}
}
// --- UI Rendering and Event Handlers ---
function renderTasks(tasks) {
taskListElement.innerHTML = '';
if (!tasks || tasks.length === 0) {
taskListElement.innerHTML = `<li style="padding: 15px; color: var(--text-light);
text-align: center;">You have no tasks! Add one above.</li>`;
return;
}
tasks.forEach(task => {
const listItem = document.createElement('li');
listItem.className = `task-item ${task.completed ? 'task-completed' : ''}`;
listItem.dataset.id = String(task.id);
listItem.innerHTML = `
<div class="task-details">
<input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' :
''} data-id="${task.id}">
<span class="task-title">${task.title}</span>
<span class="task-description" hidden>${task.description}</span>
</div>
<div class="task-actions">
<button class="button edit-button" data-id="${task.id}">Edit</button>
<button class="button delete-button" data-id="${task.id}">Delete</button>
</div>
`;
taskListElement.appendChild(listItem);
});
}
function openEditModal(taskId, title, description) {
currentEditingTaskId = taskId;
editTitleInput.value = title;
editDescriptionInput.value = description;
editModalOverlay.classList.add('active');
editTitleInput.focus();
}
function closeEditModal() {
editModalOverlay.classList.remove('active');
currentEditingTaskId = null;
}
// --- Event Listeners ---
formElement.addEventListener('submit', (e) => {
e.preventDefault();
const title = newTaskTitleInput.value.trim();
const description = newTaskDescriptionInput.value.trim();
if (title) {
addTask(title, description);
} else {
showMessage('Task title cannot be empty.', true);
}
});
taskListElement.addEventListener('click', (e) => {
const target = e.target;
const taskId = target.dataset.id || target.closest('.task-item')?.dataset.id; // Fallback to item ID
if (!taskId) return;
if (target.classList.contains('task-checkbox')) {
toggleTask(taskId, target.checked);
} else if (target.classList.contains('delete-button')) {
deleteTask(taskId);
} else if (target.classList.contains('edit-button')) {
const taskItem = target.closest('.task-item');
const title = taskItem.querySelector('.task-title').textContent;
const description = taskItem.querySelector('.task-description').textContent;
openEditModal(taskId, title, description);
}
});
saveEditButton.addEventListener('click', () => {
const newTitle = editTitleInput.value.trim();
const newDescription = editDescriptionInput.value.trim();
if (newTitle && currentEditingTaskId) {
updateTaskTitle(currentEditingTaskId, newTitle, newDescription);
} else {
showMessage('Updated task title cannot be empty.', true);
}
});
document.getElementById('cancel-edit').addEventListener('click', closeEditModal);
editModalOverlay.addEventListener('click', (e) => {
if (e.target === editModalOverlay) {
closeEditModal();
}
});
// Initialize App: Fetch tasks on load
window.onload = fetchTasks;
</script>
</body>
</html>